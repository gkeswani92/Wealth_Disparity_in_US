<html>
<head>
<script src="http://d3js.org/d3.v3.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="custom.css">
<link href="bootstrap.min.css" rel="stylesheet">
</head>

<body>
<div class="container">

<!-- Gaurav's work -->
<div id = "mean_quantile_yearwise" class="row row-content">
<div class ="year"> </div>
</div>

<script>
var margin = { top: 20, right: 100, bottom: 100, left: 200 };
var width = 1150 - margin.left - margin.right;
var height = 600;
var gridSize = Math.floor(width / 44);
var colors = d3.scale.ordinal().range(["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"]);
var yearScale = Array(3);
var netWorth = Array(130);

for(var i=0; i<yearScale.length; i++){
yearScale[i] = 2000 + i * 5
}
for(var j=-1; j<netWorth.length-1; j++){
netWorth[j+1] = 13000 * j;
}

var x = d3.scale.ordinal().rangeRoundBands([0, width], 0.1);
var y = d3.scale.linear().rangeRound([height, 0]);

var svg = d3.select("#mean_quantile_yearwise").append("svg")
              .attr("width", width + margin.left + margin.right)
              .attr("height", height + margin.top + margin.bottom)
              .append("g")
              .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//create axis labels
var xLabel = svg.append("text")
                  .attr("class", "label")
                  .text("Year")
                  .attr("x", yearScale.length * gridSize * 8)
                  .attr("y", height + 40)
                  .style("text-anchor", "middle")
                  .style("dominant-baseline", "middle")
                  .style("font-size", "20")
                  .attr("transform", "translate(0,20)");

var yLabel = svg.append("text")
                 .attr("class", "label")
                 .text("Median Net Worth")
                 .attr("x", -width/4)
                 .attr("y", netWorth.length * gridSize / 20)
                 .style("text-anchor", "middle")
                 .style("dominant-baseline", "middle")
                 .style("font-size", "20")
                 .attr("transform", "rotate(-90, -50," + netWorth.length/10 * gridSize +" )");

//create x and y axis
var xAxis = d3.svg.axis().scale(x).orient("bottom");
var yAxis = d3.svg.axis().scale(y).orient("left");

//Loading the data from the csv file
d3.csv("quantile_data.csv",
   function(error, data) {

      // Make sure our numbers are really numbers
      data.forEach(function (d) {
          d.year = +d.year;
          d.low = +d.low;
          d.second = +d.second;
          d.third = +d.third;
          d.fourth = +d.fourth;
          d.highest = +d.highest;
      });

      // Map our columns to our colors
      colors.domain(d3.keys(data[0]).filter(function (key) {
          return key !== "year";
      }));

      data.forEach(function (d) {
          var y0 = 0;
          d.types = colors.domain().map(function (name) {
              return {
                  name: name,
                  y0: y0,
                  y1: y0 += +d[name]
              };
          });
          d.total = d.types[d.types.length - 1].y1;
      });

      // Our X domain is our set of years
      x.domain(data.map(function (d) {
          return d.year;
      }));

      // Our Y domain is from zero to our highest total
      y.domain([0, d3.max(data, function (d) {
          return d.total;
      })]);

      var year = svg.selectAll(".year")
          .data(data)
          .enter().append("g")
          .attr("class", "g")
          .attr("transform", function (d) {
          return "translate(" + x(d.year) + ",0)";
      });

      year.selectAll("rect")
          .data(function (d) {
          return d.types;
      })
          .enter().append("rect")
          .attr("width", x.rangeBand())
          .attr("y", function (d) {
          return y(d.y1);
      })
          .attr("height", function (d) {
              if(d.y1 - d.y0 > 0){
                  return y(d.y0) - y(d.y1);
              } else {
                  return y(d.y1) - y(d.y0);
              }
      })
          .style("fill", function (d) {
          return colors(d.name);
      });

    });

svg.append("g")
   .attr("class", "x axis")
   .attr("font-family", "Verdana")
   .attr("font-size", "14")
   .attr("transform", "translate(0," + height + ")")
   .call(xAxis);

svg.append("g")
   .attr("font-family", "Verdana")
   .attr("class", "y axis")
   .call(yAxis);
</script>

<!-- Rui Liang's work -->
<div id="race" class="row row-content">
<svg width="960" height="700">

<defs>
<clipPath id="myClip">
  <!-- Rich White Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.8, 0.8) translate(-170, -214) "/>
<!-- Poor White Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.1, 0.1) translate(600, 2300)"/>

<!-- Rich Black Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.6, 0.6) translate(200, -111) "/>
<!-- Poor Black Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.08, 0.08) translate(3340, 2930)"/>



<!-- Rich Hispanic Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.4, 0.4) translate(800, 100) "/>
<!-- Poor Hispanic Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.1, 0.1) translate(4050, 2300)"/>

  <!-- Rich Asian Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.3, 0.3) translate(1550, 300) "/>
<!-- Poor Asian Dollar Sign-->
<path d="M 272.82411,214.72866 L 272.82411,254.62535 C 234.35667,257.48132 200.57571,276.96749 202.55996,320.62104 C 204.59652,365.42551 258.56969,373.57511 258.56967,373.57511 C 258.56967,373.57511 264.42968,373.63051 272.82411,374.56741 L 272.82411,450.53334 C 269.70875,450.2762 266.57638,449.90881 263.46816,449.44654 C 226.9572,448.84684 203.58375,428.56103 203.58376,428.56103 C 201.54719,428.56103 202.55996,441.79566 202.55996,457.06991 C 217.04499,469.74431 256.28549,474.16315 272.82411,475.16754 L 272.82411,523.25462 L 289.1104,524.27842 L 289.1104,475.07303 C 320.08397,472.6964 362.65607,457.77102 364.46205,415.33039 C 366.47645,367.99202 316.66337,353.27517 289.1104,348.48415 L 289.1104,277.74747 C 321.28015,278.68187 348.17577,295.16782 348.17577,295.16781 L 349.19956,263.60328 C 349.19956,263.60328 322.77595,254.80983 289.1104,254.23158 L 289.1104,214.72866 L 272.82411,214.72866 z M 272.82411,278.66101 L 272.82411,345.94827 C 257.92384,343.02221 234.42657,335.06712 233.11644,313.5017 C 232.27207,299.60301 243.31717,282.84611 272.82411,278.66101 z M 289.1104,377.19779 C 310.18893,381.7614 334.06871,392.07122 331.88948,415.33039 C 329.24521,439.97894 310.95203,449.2718 289.1104,450.7381 L 289.1104,377.19779 z " transform="scale(0.1, 0.1) translate(5210, 2300)"/>

</clipPath>
</defs>
<!-- Distribution among White top to 4th-->
<rect x="0" y="0" width="800" height="204.8" clip-path="url(#myClip)" fill="rgb(0,104,55)"/>
<rect x="0" y="204.8" width="800" height="31.4" clip-path="url(#myClip)" fill="rgb(120,198,121)"/>
<rect x="0" y="236.2" width="800" height="11.7" clip-path="url(#myClip)" fill="rgb(194,230,153)"/>
<rect x="0" y="247.8" width="800" height="2.2" clip-path="url(#myClip)" fill="rgb(255,255,204)"/>
<!-- Distribution among White poor-->
<rect x="0" y="251" width="800" height="40" clip-path="url(#myClip)" fill="red"/>

<Path d="M 10,250 950,250" Stroke="black" fill="none">
<text x="5" y="250" fill="black" text-anchor="start" alignment-baseline="mathematical" font-size="30">0</text>


<rect x="400" y="40" width="40" height="30" fill="rgb(0,104,55)"/>
<rect x="400" y="80" width="40" height="30" fill="rgb(120,198,121)"/>
<rect x="400" y="120" width="40" height="30" fill="rgb(194,230,153)"/>
<rect x="400" y="160" width="40" height="30" fill="rgb(255,255,204)"/>
<rect x="400" y="200" width="40" height="30" fill="red"/>

<text x="460" y="50" fill="black" text-anchor="start" alignment-baseline="mathematical" font-size="30">Quintile</text>
<text x="460" y="90" fill="black" text-anchor="start" alignment-baseline="mathematical" font-size="30">2nd Quintile</text>
<text x="460" y="130" fill="black" text-anchor="start" alignment-baseline="mathematical" font-size="30">3rd Quintile</text>
<text x="460" y="170" fill="black" text-anchor="start" alignment-baseline="mathematical" font-size="30">4th Quintile</text>
<text x="460" y="210" fill="black" text-anchor="start" alignment-baseline="mathematical" font-size="30">5th Quintile</text>
<!-- http://all-free-download.com/free-vector/download/rickvanderzwet_dollar_sign_clip_art_18009.html -->
</svg>
</div>

<!-- Taihang's work heatmap & comparison histogram -->
<div id="Title" class="row row-content">
<h1>Age-Quintiles-Wealth Distribution in different year</h1>
<p class="explanation">
Through the years, the situation of people in <b>quintile 1 which is the poorest group is becoming worse and worse</b> as we can see at the red block, the color is becoming much darker.
<br>
Also, the fifth quintile, <b>where richest people are in that quintile, is growing more healthy than 11 years ago</b>b>. As we can see the green color is getting darker.
<br>
As the common sense that wealth is accumulated when people are getting older. <b>However, this is not true for the poorest people across the US.</b>
</p>
<div id="heatMap"></div>
</div>


<div class="row row-content">
<h1 align="center">Median/Mean net worth in different regions of US</h1>
<p class="explanation">
The mean net worth and median Median net worth in quintile 2, 3 and 4 are quite close to each other. However, the fifth quitile's mean net worth is more than two times on average to the median net worth of fifth quintile, which show the fact that <b>even in the fifth quintile the net worth is not evenly distributed</b>, some super rich guys exist and lift the median value a lot. <b>Meanwhile, There are some data showing a astonishing fact that top 1% people owns 1.5 times wealth to the bottom 50% people.</b>
</p>
<div id="region"></div>
</div>

<script src="heatmap.js"></script>
<script src="region.js"></script>

</div>
</div>
</body>
</html>
